<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_6.1.xsd">

    <grid title="Registration" name="registration-grid" model="com.axelor.apps.svh.db.Registration">
        <field name="uId"/>
        <field name="createdOn" title="Create On"/>
        <field name="transport_type" widget="singleSelect"/>
        <field name="plate_no"/>
        <field name="plate_no_trailer"/>
        <field name="serial_number"/>
        <field name="vin_code"/>
        <field name="weight"/>
        <field name="calculated_amount"/>
    </grid>

    <form title="Registration Form" name="registration-form" width="large" onSave="registration.setCreateOn" model="com.axelor.apps.svh.db.Registration">
        <panel name="registrationOverviewPanel" title="OverviewPanel" colSpan="7">
            <field name="uId" readonly="true" colSpan="2"/>
            <field name="transport_type" widget="singleSelect" selection="svh.registration.transport_types_selections"/>
        </panel>

        <panel name="companyCar" title="Company Car" showIf="transport_type == 'COMPANY_CAR'">
            <field name="plate_no" onChange="registration.normalize"/>
        </panel>

        <panel name="passengerTransport" title="Passenger Transport" showIf="transport_type == 'PASSENGER'">
            <field name="vin_code" onChange="registration.normalize"/>
        </panel>

        <panel name="specialEquipment" title="Special Equipment" showIf="transport_type == 'SPECIAL'">
            <field name="serial_number" onChange="registration.normalize"/>
            <field name="plate_no" onChange="registration.normalize"/>
            <field name="plate_no_trailer" onChange="registration.normalize"/>
        </panel>

        <panel name="carCarrier" title="Car Carrier" showIf="transport_type == 'CAR_CARRIER'">
            <field name="plate_no" onChange="registration.normalize"/>
            <field name="plate_no_trailer" onChange="registration.normalize"/>
        </panel>

        <panel name="freightTransport" title="freightTransport" showIf="transport_type == 'FREIGHT'">
            <field name="plate_no_trailer" onChange="registration.normalize"/>
            <field name="weight"/>
        </panel>

        <panel name="CalculatePanel" title="Calculate Panel" showIf="transport_type != 'COMPANY_CAR'"  sidebar="true">
            <field name="calculated_amount"/>
            <button name="Calculate" title="Calculate" onClick="tariff.calculate"/>
        </panel>

        <panel-mail>
            <mail-messages/>
        </panel-mail>
    </form>

    <action-method name="tariff.calculate">
        <call class="com.axelor.apps.svh.web.TariffController" method="calculateTariff"/>
    </action-method>

    <action-method name="registration.setCreateOn">
        <call class="com.axelor.apps.svh.web.RegistrationController" method="setCurrentDate"/>
    </action-method>

    <action-method name="registration.normalize">
        <call class="com.axelor.apps.svh.web.RegistrationController" method="normalizeOnChange"/>
    </action-method>
</object-views>